{% extends "base.html" %}

{% block title %}{{ user.username }}のプロフィール - Twitter Clone{% endblock %}

{% block content %}
    <h2>{{ user.username }} のツイート</h2>

    {# ユーザー情報 #}
    {# <p>Email: {{ user.email }}</p> #}

    {# フォロー/アンフォローボタン (自分自身のプロフィールでない場合) #}
    {% if user != current_user %}
        <div>
            {% if current_user.is_following(user) %}
                <form action="{{ url_for('unfollow', username=user.username) }}" method="post" style="display: inline;">
                    <button type="submit">アンフォロー</button>
                </form>
            {% else %}
                <form action="{{ url_for('follow', username=user.username) }}" method="post" style="display: inline;">
                    <button type="submit">フォロー</button>
                </form>
            {% endif %}
        </div>
    {% endif %}
    <hr>

    {# ツイート一覧 #}
    {% if tweets %}
        {% for tweet in tweets %}
            <div class="tweet">
                {# プロフィールページではユーザー名は不要かもしれないが、一貫性のために残す #}
                <div class="username">{{ tweet.author.username }}</div>
                <div class="content">{{ tweet.content }}</div>
                <div class="timestamp">{{ tweet.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</div>
            </div>
        {% endfor %}
    {% else %}
        <p>{{ user.username }} はまだツイートしていません。</p>
    {% endif %}
{% endblock %}
